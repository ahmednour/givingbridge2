# ๐งช ุงุฎุชุจุงุฑ ุฏูุฑุฉ ุญูุงุฉ ุงูุทูุจ (Request Flow Test)

## ๐ ุงูุณููุงุฑูู ุงููุงูู:

### 1๏ธโฃ **ุงููุณุชูุจู (Receiver)** - receiver@example.com

#### ุงูุฎุทูุฉ 1: ุชุณุฌูู ุงูุฏุฎูู
```
Email: receiver@example.com
Password: password123
```

#### ุงูุฎุทูุฉ 2: ุชุตูุญ ุงูุชุจุฑุนุงุช
- ุงุฐูุจ ุฅูู: **Browse Donations**
- ุงุฎุชุฑ ุชุจุฑุน ูุชุงุญ (ูุฌุจ ุฃู ูููู `approved`)

#### ุงูุฎุทูุฉ 3: ุทูุจ ุงูุชุจุฑุน
- ุงุถุบุท ุนูู ุฒุฑ **"Request"**
- ุฃุฏุฎู ุฑุณุงูุฉ (ุงุฎุชูุงุฑู)
- ุงุถุบุท **"Send Request"**
- โ **ุงููุชูุฌุฉ:** ุงูุทูุจ ูููุดุฃ ุจุญุงูุฉ `pending` ๐ก

#### ุงูุฎุทูุฉ 4: ุงูุชุญูู ูู ุงูุทูุจ
- ุงุฐูุจ ุฅูู: **My Requests**
- ูุฌุจ ุฃู ุชุดุงูุฏ ุงูุทูุจ ุจุญุงูุฉ **"Pending"** ๐ก
- ูุฌุจ ุฃู ุชุดุงูุฏ ุฒุฑ **"Cancel Request"**

---

### 2๏ธโฃ **ุงููุชุจุฑุน (Donor)** - demo@example.com

#### ุงูุฎุทูุฉ 1: ุชุณุฌูู ุงูุฏุฎูู
```
Email: demo@example.com
Password: password123
```

#### ุงูุฎุทูุฉ 2: ูุชุญ ุงูุทูุจุงุช ุงููุงุฑุฏุฉ
- ุงุฐูุจ ุฅูู: **Incoming Requests**
- ูุฌุจ ุฃู ุชุดุงูุฏ ุงูุทูุจ ุงูุฌุฏูุฏ ุจุญุงูุฉ **"Pending"** ๐ก

#### ุงูุฎุทูุฉ 3: ุงูููุงููุฉ ุนูู ุงูุทูุจ
- ุงุถุบุท ุนูู ุฒุฑ **"Approve"** ๐ข
- ุฃุฏุฎู ุฑุณุงูุฉ ูููุณุชูุจู (ุงุฎุชูุงุฑู)
- ุงุถุบุท **"Approve"**
- โ **ุงููุชูุฌุฉ:** ุงูุทูุจ ูุชุญุฏุซ ุฅูู `approved` ๐ข

#### ุงูุฎุทูุฉ 4: ุงูุชุญูู ูู ุงูุญุงูุฉ
- ูุฌุจ ุฃู ุชุดุงูุฏ ุฑุณุงูุฉ: **"Approved - Waiting for receiver to confirm receipt"**
- ุงูุชุจุฑุน ูุตุจุญ `isAvailable: false`

---

### 3๏ธโฃ **ุงููุณุชูุจู (Receiver)** - ูุฑุฉ ุฃุฎุฑู

#### ุงูุฎุทูุฉ 1: ุชุญุฏูุซ ุงูุตูุญุฉ
- ุงุฑุฌุน ุฅูู: **My Requests**
- ุงุณุญุจ ููุฃุณูู ููุชุญุฏูุซ (Pull to refresh)

#### ุงูุฎุทูุฉ 2: ุงูุชุญูู ูู ุงูุฒุฑ โญ
- ูุฌุจ ุฃู ุชุดุงูุฏ ุงูุทูุจ ุจุญุงูุฉ **"Approved"** ๐ข
- ูุฌุจ ุฃู ุชุดุงูุฏ ุฒุฑ **"Mark as Received"** ๐ฏ

#### ุงูุฎุทูุฉ 3: ุชุฃููุฏ ุงูุงุณุชูุงู
- ุงุถุบุท ุนูู ุฒุฑ **"Mark as Received"**
- ุฃูุฏ ูู ุงูู dialog: **"Yes, I received it"**
- โ **ุงููุชูุฌุฉ:** ุงูุทูุจ ูุชุญุฏุซ ุฅูู `completed` โ

#### ุงูุฎุทูุฉ 4: ุงูุชุญูู ุงูููุงุฆู
- ูุฌุจ ุฃู ุชุดุงูุฏ ุงูุทูุจ ุจุญุงูุฉ **"Completed"** โ
- ูุฌุจ ุฃู ุชุดุงูุฏ ุฒุฑ **"Completed"** (ูุนุทู)
- ุงูุชุจุฑุน ูุตุจุญ `status: "completed"`

---

## ๐ ููุงุท ุงูุชุญูู (Checkpoints):

### โ ูู ุตูุญุฉ **My Requests** (ุงููุณุชูุจู):

| ุญุงูุฉ ุงูุทูุจ | ุงูุฒุฑ ุงููุชููุน | ุงูููู |
|------------|--------------|-------|
| `pending` | "Cancel Request" | ุฑูุงุฏู (Outline) |
| `approved` | **"Mark as Received"** | ุฃุฒุฑู (Primary) โญ |
| `completed` | "Completed" (ูุนุทู) | ุฑูุงุฏู (Outline) |
| `declined` | "Declined" (ูุนุทู) | ุฑูุงุฏู (Outline) |

### โ ูู ุตูุญุฉ **Incoming Requests** (ุงููุชุจุฑุน):

| ุญุงูุฉ ุงูุทูุจ | ุงูุฃุฒุฑุงุฑ ุงููุชููุนุฉ |
|------------|------------------|
| `pending` | "Decline" + "Approve" |
| `approved` | "Message" + ูุต: "Approved - Waiting..." |
| `completed` | ูุต: "Completed" |
| `declined` | ูุต: "Declined" |

---

## ๐ ุฅุฐุง ูู ูุธูุฑ ุงูุฒุฑ:

### 1. ุชุญูู ูู Console Logs:
ุงูุชุญ Developer Tools ูุดูู ุงูู logs:
```
Request 1: status=approved, isApproved=true
```

### 2. ุชุญูู ูู ุงูู API Response:
ูู Network tabุ ุดูู response ูู:
```
GET /api/requests/receiver/my-requests
```

ูุฌุจ ุฃู ูุญุชูู ุนูู:
```json
{
  "requests": [
    {
      "id": 1,
      "status": "approved",
      ...
    }
  ]
}
```

### 3. ุชุญูู ูู ุงูู Backend:
ุดูู ุงูู server logs:
```
UPDATE requests SET status='approved', respondedAt=NOW() WHERE id=1
```

---

## ๐ฏ ุงูุฎูุงุตุฉ:

ุงูุฒุฑ **"Mark as Received"** ูุธูุฑ ููุท ุนูุฏูุง:
1. โ ุงูุทูุจ ูู ุญุงูุฉ `approved`
2. โ ุงููุณุชุฎุฏู ูู ุงููุณุชูุจู (receiver)
3. โ ุงูุตูุญุฉ ูุญุฏุซุฉ (refreshed)

ุฅุฐุง ูู ูุธูุฑ ุงูุฒุฑุ ุชุฃูุฏ ูู:
- ุงููุชุจุฑุน ูุงูู ุนูู ุงูุทูุจ ูุนูุงู
- ุงูุตูุญุฉ ูุญุฏุซุฉ (ุงุณุญุจ ููุฃุณูู)
- ุงูู status ูู ุงูู API response ูู `"approved"`
