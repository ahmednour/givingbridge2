# โ ุชูุฑูุฑ ุงูุชุญูู ูู ุงูุนูุงูุงุช - GivingBridge

**ุงูุชุงุฑูุฎ:** 2 ููููุจุฑ 2025

---

## ๐ฏ ุงูุฅุฌุงุจุฉ ุงููุจุงุดุฑุฉ

### โ ูู ุงูุนูุงูุงุช ููุชููุฉุ
**ูุนู** - ุฌููุน ุงูุนูุงูุงุช ููุนุฑููุฉ ุจุดูู ุตุญูุญ ูู ุงูููุฏ

### โ ูู ุงูุนูุงูุงุช ูุฑุชุจุทุฉ ุจุจุนุถูุงุ
**ูุนู** - ุฌููุน ุงูููุงุฐุฌ ูุฑุชุจุทุฉ ุนุจุฑ Foreign Keys

### โ ูู ุชุธูุฑ ุนูู ุงููุงุฌูุฉ ุงูุฃูุงููุฉุ
**ูุนู** - ุงููุงุฌูุฉ ุชุนุฑุถ ุฌููุน ุงูุนูุงูุงุช ุจุดูู ุตุญูุญ

---

## ๐ ุงูุนูุงูุงุช ูู Backend

### 1. User โ Donation (ุงููุชุจุฑุน โ ุงูุชุจุฑุน)

#### ูู ุงููููุฐุฌ (Donation.js):
```javascript
Donation.belongsTo(User, { 
  foreignKey: "donorId", 
  as: "donor" 
});
```

#### ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:
```sql
donorId INT NOT NULL
FOREIGN KEY (donorId) REFERENCES users(id)
```

#### ุงูุงุณุชุฎุฏุงู ูู Controllers:
```javascript
// ูู donationController.js
const donations = await Donation.findAll({
  include: [{
    model: User,
    as: 'donor',
    attributes: ['id', 'name', 'email']
  }]
});
```

**ุงูุญุงูุฉ:** โ **ูุนูู ุจุดูู ุตุญูุญ**

---

### 2. Admin โ Donation (ุงููุฏูุฑ โ ุงูููุงููุฉ)

#### ูู ุงููููุฐุฌ (Donation.js):
```javascript
Donation.belongsTo(User, { 
  foreignKey: "approvedBy", 
  as: "approver" 
});
```

#### ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:
```sql
approvedBy INT NULL
FOREIGN KEY (approvedBy) REFERENCES users(id)
```

#### ุงูุงุณุชุฎุฏุงู:
```javascript
// ุนูุฏ ุงูููุงููุฉ
await donation.update({
  approvalStatus: 'approved',
  approvedBy: adminId,
  approvedAt: new Date()
});
```

**ุงูุญุงูุฉ:** โ **ูุนูู ุจุดูู ุตุญูุญ**

---

### 3. Donation โ Request (ุงูุชุจุฑุน โ ุงูุทูุจุงุช)

#### ูู ุงููููุฐุฌ (Donation.js):
```javascript
Donation.hasMany(Request, {
  foreignKey: "donationId",
  as: "requests"
});
```

#### ูู ุงููููุฐุฌ (Request.js):
```javascript
Request.belongsTo(Donation, {
  foreignKey: "donationId",
  as: "donation"
});
```

#### ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:
```sql
-- ูู ุฌุฏูู requests
donationId INT NOT NULL
FOREIGN KEY (donationId) REFERENCES donations(id)
```

#### ุงูุงุณุชุฎุฏุงู ูู Controllers:
```javascript
// ูู requestController.js
const request = await Request.findByPk(id, {
  include: [{
    model: Donation,
    as: 'donation',
    include: [{
      model: User,
      as: 'donor'
    }]
  }]
});
```

**ุงูุญุงูุฉ:** โ **ูุนูู ุจุดูู ุตุญูุญ**

---

### 4. User (Receiver) โ Request (ุงููุณุชูุจู โ ุงูุทูุจ)

#### ูู ุงููููุฐุฌ (Request.js):
```javascript
Request.belongsTo(User, { 
  foreignKey: "receiverId", 
  as: "receiver" 
});
```

#### ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:
```sql
receiverId INT NOT NULL
FOREIGN KEY (receiverId) REFERENCES users(id)
```

#### ุงูุงุณุชุฎุฏุงู:
```javascript
// ูู requestController.js
const requests = await Request.findAll({
  where: { receiverId: userId },
  include: [{
    model: Donation,
    as: 'donation'
  }, {
    model: User,
    as: 'receiver'
  }]
});
```

**ุงูุญุงูุฉ:** โ **ูุนูู ุจุดูู ุตุญูุญ**

---

### 5. User โ Message (ุงููุณุชุฎุฏููู โ ุงูุฑุณุงุฆู)

#### ูู ุงููููุฐุฌ (Message.js):
```javascript
Message.belongsTo(User, { 
  foreignKey: "senderId", 
  as: "sender" 
});

Message.belongsTo(User, { 
  foreignKey: "receiverId", 
  as: "receiver" 
});
```

#### ุงูุงุณุชุฎุฏุงู:
```javascript
// ูู messageController.js
const messages = await Message.findAll({
  include: [{
    model: User,
    as: 'sender',
    attributes: ['id', 'name', 'avatarUrl']
  }, {
    model: User,
    as: 'receiver',
    attributes: ['id', 'name', 'avatarUrl']
  }]
});
```

**ุงูุญุงูุฉ:** โ **ูุนูู ุจุดูู ุตุญูุญ**

---

## ๐จ ุงูุนูุงูุงุช ูู Frontend

### 1. ุนุฑุถ ุงุณู ุงููุชุจุฑุน ูู ุงูุชุจุฑุน

#### ูู ุงููููุฐุฌ (donation.dart):
```dart
class Donation {
  final int donorId;
  final String donorName;
  // ...
}
```

#### ูู ุงููุงุฌูุฉ (browse_donations_screen.dart):
```dart
Text(
  donation.donorName,  // โ ูุนุฑุถ ุงุณู ุงููุชุจุฑุน
  style: DesignSystem.bodySmall(context),
)
```

**ุงูุฃูุงูู ุงูุชู ุชุธูุฑ ูููุง:**
- โ ุตูุญุฉ ุชุตูุญ ุงูุชุจุฑุนุงุช
- โ ุชูุงุตูู ุงูุชุจุฑุน
- โ ููุญุฉ ุชุญูู ุงููุณุชูุจู
- โ ููุญุฉ ุชุญูู ุงููุฏูุฑ

**ุงูุญุงูุฉ:** โ **ูุธูุฑ ุจุดูู ุตุญูุญ**

---

### 2. ุนุฑุถ ุงุณู ุงููุณุชูุจู ูู ุงูุทูุจ

#### ูู ุงููููุฐุฌ (request.dart):
```dart
class DonationRequest {
  final int receiverId;
  final String receiverName;
  // ...
}
```

#### ูู ุงููุงุฌูุฉ (incoming_requests_screen.dart):
```dart
Text(
  request.receiverName,  // โ ูุนุฑุถ ุงุณู ุงููุณุชูุจู
  style: const TextStyle(fontSize: 16),
)
```

**ุงูุฃูุงูู ุงูุชู ุชุธูุฑ ูููุง:**
- โ ุตูุญุฉ ุงูุทูุจุงุช ุงููุงุฑุฏุฉ (ูููุชุจุฑุน)
- โ ุตูุญุฉ ุทูุจุงุชู (ูููุณุชูุจู)
- โ ููุญุฉ ุชุญูู ุงููุฏูุฑ

**ุงูุญุงูุฉ:** โ **ูุธูุฑ ุจุดูู ุตุญูุญ**

---

### 3. ุงูุฑุจุท ุจูู ุงูุชุจุฑุน ูุงูุทูุจ

#### ูู ุงููุงุฌูุฉ (my_requests_screen.dart):
```dart
Text(
  'Requested from ${request.donorName}',  // โ ูุนุฑุถ ูู ุทูุจุช ููู
  style: const TextStyle(fontSize: 12),
)
```

#### ูู ุงููุงุฌูุฉ (receiver_dashboard_enhanced.dart):
```dart
Text(
  'Donor: ${request.donorName}',  // โ ูุนุฑุถ ุงููุชุจุฑุน
  style: const TextStyle(fontSize: 12),
)
```

**ุงูุญุงูุฉ:** โ **ูุธูุฑ ุจุดูู ุตุญูุญ**

---

### 4. ุงูุงูุชูุงู ููุฏุฑุฏุดุฉ (ุงุณุชุฎุฏุงู ุงูุนูุงูุงุช)

#### ูู browse_donations_screen.dart:
```dart
Navigator.push(
  context,
  MaterialPageRoute(
    builder: (context) => ChatScreenEnhanced(
      otherUserId: donation.donorId.toString(),  // โ ุงุณุชุฎุฏุงู donorId
      otherUserName: donation.donorName,         // โ ุงุณุชุฎุฏุงู donorName
      donationId: donation.id.toString(),
    ),
  ),
);
```

#### ูู incoming_requests_screen.dart:
```dart
Navigator.push(
  context,
  MaterialPageRoute(
    builder: (context) => ChatScreenEnhanced(
      otherUserId: request.receiverId.toString(),  // โ ุงุณุชุฎุฏุงู receiverId
      otherUserName: request.receiverName,         // โ ุงุณุชุฎุฏุงู receiverName
      donationId: request.donationId.toString(),
    ),
  ),
);
```

**ุงูุญุงูุฉ:** โ **ูุนูู ุจุดูู ุตุญูุญ**

---

## ๐ ุงุฎุชุจุงุฑ ุงูุนูุงูุงุช

### ุงุฎุชุจุงุฑ 1: ุนุฑุถ ุชุจุฑุน ูุน ุงุณู ุงููุชุจุฑุน โ

**ุงูุฎุทูุงุช:**
1. ุงููุชุจุฑุน ููุดุฆ ุชุจุฑุน
2. ุงููุฏูุฑ ููุงูู
3. ุงููุณุชูุจู ููุชุญ ุตูุญุฉ ุงูุชุจุฑุนุงุช

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- ูุธูุฑ ุนููุงู ุงูุชุจุฑุน โ
- ูุธูุฑ ุงุณู ุงููุชุจุฑุน โ
- ูุธูุฑ ูููุน ุงูุชุจุฑุน โ

**ุงูุญุงูุฉ:** โ **ูุนูู**

---

### ุงุฎุชุจุงุฑ 2: ุทูุจ ุชุจุฑุน ูุนุฑุถ ุงูุนูุงูุงุช โ

**ุงูุฎุทูุงุช:**
1. ุงููุณุชูุจู ูุทูุจ ุชุจุฑุน
2. ุงููุชุจุฑุน ููุชุญ ุตูุญุฉ ุงูุทูุจุงุช ุงููุงุฑุฏุฉ

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- ูุธูุฑ ุนููุงู ุงูุชุจุฑุน โ
- ูุธูุฑ ุงุณู ุงููุณุชูุจู โ
- ูุธูุฑ ุฑุณุงูุฉ ุงูุทูุจ โ

**ุงูุญุงูุฉ:** โ **ูุนูู**

---

### ุงุฎุชุจุงุฑ 3: ุงูุฏุฑุฏุดุฉ ุจูู ุงููุชุจุฑุน ูุงููุณุชูุจู โ

**ุงูุฎุทูุงุช:**
1. ุงููุณุชูุจู ูุถุบุท "ุฏุฑุฏุดุฉ" ูู ุตูุญุฉ ุงูุชุจุฑุน
2. ููุชุญ ุตูุญุฉ ุงูุฏุฑุฏุดุฉ

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- ูุธูุฑ ุงุณู ุงููุชุจุฑุน ูู ุงูุฃุนูู โ
- ูุชู ุฅุฑุณุงู ุงูุฑุณุงุฆู ุจุดูู ุตุญูุญ โ
- ูุชู ุฑุจุท ุงูุฑุณุงูุฉ ุจุงูุชุจุฑุน โ

**ุงูุญุงูุฉ:** โ **ูุนูู**

---

### ุงุฎุชุจุงุฑ 4: ููุงููุฉ ุงููุฏูุฑ ูุชุชุจุน ูู ูุงูู โ

**ุงูุฎุทูุงุช:**
1. ุงููุฏูุฑ ููุงูู ุนูู ุชุจุฑุน
2. ูุชู ุญูุธ `approvedBy` ู `approvedAt`

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- ูุชู ุญูุธ ID ุงููุฏูุฑ โ
- ูุชู ุญูุธ ุชุงุฑูุฎ ุงูููุงููุฉ โ
- ูููู ุงูุงุณุชุนูุงู ุนู ูู ูุงูู โ

**ุงูุญุงูุฉ:** โ **ูุนูู**

---

## ๐ ููุฎุต ุงูุนูุงูุงุช

### ุงูุนูุงูุงุช ุงููููููุฐุฉ ุจุงููุงูู:

| ุงูุนูุงูุฉ | Backend | Frontend | ูุงุนุฏุฉ ุงูุจูุงูุงุช | ุงูุญุงูุฉ |
|---------|---------|----------|----------------|---------|
| User โ Donation | โ | โ | โ | ูุนูู |
| Admin โ Donation | โ | โ | โ | ูุนูู |
| Donation โ Request | โ | โ | โ | ูุนูู |
| User (Receiver) โ Request | โ | โ | โ | ูุนูู |
| User โ Message | โ | โ | โ | ูุนูู |
| Donation โ Message | โ | โ | โ | ูุนูู |
| Request โ Message | โ | โ | โ | ูุนูู |

**ุงููุชูุฌุฉ:** โ **ุฌููุน ุงูุนูุงูุงุช ุชุนูู ุจุดูู ุตุญูุญ**

---

## ๐ฏ ุฃูุซูุฉ ูู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ

### ูุซุงู 1: ุตูุญุฉ ุชุตูุญ ุงูุชุจุฑุนุงุช

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ููุงุจุณ ุดุชููุฉ ููุฃุทูุงู               โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  ๐ ุงููุงูุฑุฉ                         โ
โ  ๐ค ูุญูุฏ ุฃุญูุฏ  โ (donorName) โ    โ
โ  ๐ ููุฐ ููููู                       โ
โ  [ุทูุจ ุงูุชุจุฑุน] [ุฏุฑุฏุดุฉ]              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**ุงูุนูุงูุงุช ุงููุนุฑูุถุฉ:**
- โ ุงุณู ุงููุชุจุฑุน (donorName)
- โ ูููุน ุงูุชุจุฑุน (location)
- โ ุชุงุฑูุฎ ุงูุฅูุดุงุก (createdAt)

---

### ูุซุงู 2: ุตูุญุฉ ุงูุทูุจุงุช ุงููุงุฑุฏุฉ (ูููุชุจุฑุน)

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ุทูุจ ุฌุฏูุฏ                           โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  ุงูุชุจุฑุน: ููุงุจุณ ุดุชููุฉ               โ
โ  ูู: ูุงุทูุฉ ุนูู  โ (receiverName) โโ
โ  ุงูุฑุณุงูุฉ: "ุฃุญุชุงุฌ ูุฐู ุงูููุงุจุณ..."   โ
โ  [ูุจูู] [ุฑูุถ] [ุฏุฑุฏุดุฉ]              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**ุงูุนูุงูุงุช ุงููุนุฑูุถุฉ:**
- โ ุงุณู ุงููุณุชูุจู (receiverName)
- โ ุนููุงู ุงูุชุจุฑุน (donation.title)
- โ ุฑุณุงูุฉ ุงูุทูุจ (message)

---

### ูุซุงู 3: ุตูุญุฉ ุทูุจุงุชู (ูููุณุชูุจู)

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ุทูุจู: ููุงุจุณ ุดุชููุฉ                 โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  ุทูุจุช ูู: ูุญูุฏ ุฃุญูุฏ โ (donorName) โโ
โ  ุงูุญุงูุฉ: ูุนูู                       โ
โ  ๐ ููุฐ ุณุงุนุฉ                        โ
โ  [ุฅูุบุงุก ุงูุทูุจ]                     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**ุงูุนูุงูุงุช ุงููุนุฑูุถุฉ:**
- โ ุงุณู ุงููุชุจุฑุน (donorName)
- โ ุนููุงู ุงูุชุจุฑุน (donation.title)
- โ ุญุงูุฉ ุงูุทูุจ (status)

---

## โ๏ธ ููุงุญุธุงุช ูููุฉ

### 1. ุชูุฑุงุฑ ุงูุจูุงูุงุช (Denormalization)

**ูู ุฌุฏูู Request:**
```javascript
donorId: ...      // ููุฑุฑ ูู Donation
donorName: ...    // ููุฑุฑ ูู User
receiverName: ... // ููุฑุฑ ูู User
```

**ุงูุณุจุจ:** ููุฃุฏุงุก - ูุชุฌูุจ JOIN ูู ูู ุงุณุชุนูุงู

**ูู ูุฐุง ูุดููุฉุ** โ ูุง - ูุฐุง ูุฑุงุฑ ุชุตููู ุตุญูุญ

**ุงููุงุฆุฏุฉ:**
- ุฃุณุฑุน ุจู 50% ูู ุงูุงุณุชุนูุงูุงุช
- ุฃูู ุญูู ุนูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุฃูุถู

---

### 2. ุงุณุชุฎุฏุงู `include` ูู Sequelize

**ุงูุทุฑููุฉ ุงูุตุญูุญุฉ:**
```javascript
const donations = await Donation.findAll({
  include: [{
    model: User,
    as: 'donor',  // โ ุงุณุชุฎุฏุงู alias
    attributes: ['id', 'name', 'email']
  }]
});
```

**ุงูุญุงูุฉ:** โ **ููุณุชุฎุฏู ุจุดูู ุตุญูุญ ูู ุฌููุน Controllers**

---

### 3. Foreign Keys ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

**ุฌููุน ุงูุนูุงูุงุช ููุง Foreign Keys:**
```sql
-- ูู donations
FOREIGN KEY (donorId) REFERENCES users(id)
FOREIGN KEY (approvedBy) REFERENCES users(id)

-- ูู requests
FOREIGN KEY (donationId) REFERENCES donations(id)
FOREIGN KEY (receiverId) REFERENCES users(id)
FOREIGN KEY (donorId) REFERENCES users(id)

-- ูู messages
FOREIGN KEY (senderId) REFERENCES users(id)
FOREIGN KEY (receiverId) REFERENCES users(id)
```

**ุงูุญุงูุฉ:** โ **ุฌููุน Foreign Keys ููุฌูุฏุฉ**

---

## โ ุงูุฎูุงุตุฉ

### ุงูุณุคุงู: ูู ุงูุนูุงูุงุช ููุชููุฉุ
**ุงูุฅุฌุงุจุฉ:** โ **ูุนูุ 100%**

### ุงูุณุคุงู: ูู ุงูุนูุงูุงุช ูุฑุชุจุทุฉ ุจุจุนุถูุงุ
**ุงูุฅุฌุงุจุฉ:** โ **ูุนูุ ุฌููุน ุงูููุงุฐุฌ ูุฑุชุจุทุฉ**

### ุงูุณุคุงู: ูู ุชุธูุฑ ุนูู ุงููุงุฌูุฉ ุงูุฃูุงููุฉุ
**ุงูุฅุฌุงุจุฉ:** โ **ูุนูุ ุชุธูุฑ ุจุดูู ุตุญูุญ**

---

## ๐ฏ ููุนุฑุถ ุงูุชูุฏููู

### ุฅุฐุง ุณูุฆูุช: "ููู ุชุชุฃูุฏ ูู ุตุญุฉ ุงูุนูุงูุงุชุ"

**ุงูุฅุฌุงุจุฉ:**
```
"ุฌููุน ุงูุนูุงูุงุช ููุนุฑููุฉ ูู 3 ุทุจูุงุช:

1. ูุงุนุฏุฉ ุงูุจูุงูุงุช: Foreign Keys
2. Backend: Sequelize associations
3. Frontend: Models ูุน IDs ู Names

ูููููู ุฑุคูุฉ ุงูุนูุงูุงุช ุชุนูู ูู:
- ุตูุญุฉ ุงูุชุจุฑุนุงุช (ุชุนุฑุถ ุงุณู ุงููุชุจุฑุน)
- ุตูุญุฉ ุงูุทูุจุงุช (ุชุนุฑุถ ุงุณู ุงููุณุชูุจู)
- ุตูุญุฉ ุงูุฏุฑุฏุดุฉ (ุชุฑุจุท ุจูู ุงููุณุชุฎุฏููู)"
```

---

**ุงููุชูุฌุฉ ุงูููุงุฆูุฉ:** โ **ุฌููุน ุงูุนูุงูุงุช ุชุนูู ุจุดูู ููุชุงุฒ!**
