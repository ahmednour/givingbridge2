# ๐ ุดุฑุญ ุชุตููู ูุงุนุฏุฉ ุงูุจูุงูุงุช - GivingBridge

**ุงูุชุงุฑูุฎ:** 2 ููููุจุฑ 2025

---

## ๐ฏ ููุณูุฉ ุงูุชุตููู

### ุงูุณููุงุฑูู ุงูุฃุณุงุณู:

```
1. ุงููุชุจุฑุน ููุดุฆ ุชุจุฑุน (Donation)
2. ุงููุฏูุฑ ููุงูู ุนูู ุงูุชุจุฑุน
3. ุงููุณุชูุจู ูุฑู ุงูุชุจุฑุนุงุช ุงููุชุงุญุฉ
4. ุงููุณุชูุจู ูุทูุจ ุชุจุฑุน (Request)
5. ุงููุชุจุฑุน ููุงูู/ูุฑูุถ ุงูุทูุจ
6. ูุชู ุงูุชุณููู
```

---

## ๐ ุงูุฌุฏุงูู ุงูุฑุฆูุณูุฉ

### 1. ุฌุฏูู Users (ุงููุณุชุฎุฏููู)

```sql
users
โโโ id (PK)
โโโ name
โโโ email
โโโ password
โโโ role (donor, receiver, admin)
โโโ phone
โโโ location
โโโ avatarUrl
```

**ุงูุฃุฏูุงุฑ:**
- **donor** (ูุชุจุฑุน): ููุดุฆ ุชุจุฑุนุงุช
- **receiver** (ูุณุชูุจู): ูุทูุจ ุชุจุฑุนุงุช
- **admin** (ูุฏูุฑ): ููุงูู ุนูู ุงูุชุจุฑุนุงุช

---

### 2. ุฌุฏูู Donations (ุงูุชุจุฑุนุงุช)

```sql
donations
โโโ id (PK)
โโโ title
โโโ description
โโโ category (food, clothes, books, electronics, other)
โโโ condition (new, like-new, good, fair)
โโโ location
โโโ donorId (FK โ users.id)
โโโ donorName
โโโ imageUrl
โโโ isAvailable (boolean)
โโโ status (available, pending, completed, cancelled)
โโโ approvalStatus (pending, approved, rejected)
โโโ approvedBy (FK โ users.id) [ุงููุฏูุฑ ุงูุฐู ูุงูู]
โโโ approvedAt
โโโ rejectionReason
โโโ createdAt
โโโ updatedAt
```

**ููุงุญุธุงุช ูููุฉ:**
- โ **ูุง ููุฌุฏ ุญูู `amount`** - ูุฃู ุงูุชุจุฑุน ูู ุณูุนุฉ/ุฎุฏูุฉ ูููุณ ูุจูุบ ูุงูู
- โ **ููุฌุฏ `condition`** - ุญุงูุฉ ุงูุณูุนุฉ (ุฌุฏูุฏุ ูุณุชุนููุ ุฅูุฎ)
- โ **ููุฌุฏ `approvalStatus`** - ููููุงููุฉ ูู ุงููุฏูุฑ
- โ **ููุฌุฏ `status`** - ุญุงูุฉ ุงูุชุจุฑุน (ูุชุงุญุ ูุนููุ ููุชูู)

---

### 3. ุฌุฏูู Requests (ุงูุทูุจุงุช)

```sql
requests
โโโ id (PK)
โโโ donationId (FK โ donations.id)
โโโ donorId (FK โ users.id) [ุตุงุญุจ ุงูุชุจุฑุน]
โโโ donorName
โโโ receiverId (FK โ users.id) [ุงูุทุงูุจ]
โโโ receiverName
โโโ receiverEmail
โโโ receiverPhone
โโโ message (ุฑุณุงูุฉ ูู ุงููุณุชูุจู)
โโโ status (pending, approved, declined, completed, cancelled)
โโโ respondedAt
โโโ attachmentUrl
โโโ attachmentName
โโโ attachmentSize
โโโ createdAt
โโโ updatedAt
```

**ููุงุญุธุงุช ูููุฉ:**
- โ **ูุง ููุฌุฏ ุญูู `amount`** ูู ุงููููุฐุฌ ุงูุญุงูู
- โ **ููุฌุฏ `donationId`** - ุฑุจุท ุจุงูุชุจุฑุน ุงููุญุฏุฏ
- โ **ููุฌุฏ `receiverId`** - ูู ูุทูุจ ุงูุชุจุฑุน
- โ **ููุฌุฏ `donorId`** - ุตุงุญุจ ุงูุชุจุฑุน (ููุณุฑุนุฉ)

---

## ๐ ุงูุนูุงูุงุช ุจูู ุงูุฌุฏุงูู

### ุงูุนูุงูุงุช ุงูุญุงููุฉ:

```
User (Donor)
    โ (1:N)
Donation โ Admin (approvedBy)
    โ (1:N)
Request
    โ
User (Receiver)
```

### ุจุงูุชูุตูู:

#### 1. User โ Donation (ุงููุชุจุฑุน โ ุงูุชุจุฑุน)
```javascript
// User has many Donations
User.hasMany(Donation, { foreignKey: 'donorId' })

// Donation belongs to User (donor)
Donation.belongsTo(User, { foreignKey: 'donorId', as: 'donor' })
```

#### 2. Admin โ Donation (ุงููุฏูุฑ โ ุงูููุงููุฉ)
```javascript
// Donation belongs to User (admin who approved)
Donation.belongsTo(User, { foreignKey: 'approvedBy', as: 'approver' })
```

#### 3. Donation โ Request (ุงูุชุจุฑุน โ ุงูุทูุจุงุช)
```javascript
// Donation has many Requests
Donation.hasMany(Request, { foreignKey: 'donationId' })

// Request belongs to Donation
Request.belongsTo(Donation, { foreignKey: 'donationId' })
```

#### 4. User (Receiver) โ Request (ุงููุณุชูุจู โ ุงูุทูุจ)
```javascript
// User has many Requests (as receiver)
User.hasMany(Request, { foreignKey: 'receiverId' })

// Request belongs to User (receiver)
Request.belongsTo(User, { foreignKey: 'receiverId', as: 'receiver' })
```

---

## ๐ ุฏูุฑุฉ ุงูุญูุงุฉ ุงููุงููุฉ

### ุงููุฑุญูุฉ 1: ุฅูุดุงุก ุงูุชุจุฑุน
```
Donor โ Creates Donation
Status: pending (approvalStatus)
```

### ุงููุฑุญูุฉ 2: ููุงููุฉ ุงููุฏูุฑ
```
Admin โ Reviews Donation
Admin โ Approves/Rejects
Status: approved/rejected (approvalStatus)
```

### ุงููุฑุญูุฉ 3: ุทูุจ ุงูุชุจุฑุน
```
Receiver โ Sees approved Donations
Receiver โ Creates Request for specific Donation
Request.status: pending
```

### ุงููุฑุญูุฉ 4: ููุงููุฉ ุงููุชุจุฑุน
```
Donor โ Reviews Request
Donor โ Approves/Declines Request
Request.status: approved/declined
```

### ุงููุฑุญูุฉ 5: ุฅุชูุงู ุงูุชุณููู
```
Donor/Receiver โ Marks as completed
Request.status: completed
Donation.status: completed
```

---

## โ๏ธ ุงููุดุงูู ุงููุญุชููุฉ ูู ุงูุชุตููู ุงูุญุงูู

### 1. ุญูู `amount` ุบูุฑ ููุฌูุฏ โ

**ุงููุดููุฉ:**
- ูู README ููุฐูุฑ `amount` ูู ุฌุฏูู requests
- ููู ูู ุงููููุฐุฌ ุงููุนูู ูุง ููุฌุฏ

**ุงูุญู ุงูููุชุฑุญ:**
```javascript
// ุฅุถุงูุฉ ุญูู amount ุฅูู Request (ุงุฎุชูุงุฑู)
amount: {
  type: DataTypes.DECIMAL(10, 2),
  allowNull: true,
  comment: "ุงููุจูุบ ุงููุทููุจ (ุฅุฐุง ูุงู ุชุจุฑุน ูุงูู)"
}
```

### 2. ุงูุชุจุงุณ ูู ุงูุบุฑุถ ูู `amount`

**ุงูุณุคุงู:** ูู ุงูููุตุฉ ููุชุจุฑุนุงุช ุงูุนูููุฉ ุฃู ุงููุงููุฉุ

**ุงููุถุน ุงูุญุงูู:**
- โ ุงูุชุตููู ูุฏุนู ุงูุชุจุฑุนุงุช ุงูุนูููุฉ (ุณูุน/ุฎุฏูุงุช)
- โ ูุง ููุฌุฏ ุฏุนู ูุงุถุญ ููุชุจุฑุนุงุช ุงููุงููุฉ

**ุงูุญู:**
ุฅุฐุง ุฃุฑุฏุช ุฏุนู ุงูุชุจุฑุนุงุช ุงููุงููุฉ:

```javascript
// ูู Donation model
donationType: {
  type: DataTypes.ENUM('item', 'money', 'service'),
  allowNull: false,
  defaultValue: 'item'
},
amount: {
  type: DataTypes.DECIMAL(10, 2),
  allowNull: true,
  comment: "ุงููุจูุบ (ููุชุจุฑุนุงุช ุงููุงููุฉ ููุท)"
}
```

### 3. ุชูุฑุงุฑ ุงูุจูุงูุงุช

**ุงููุดููุฉ:**
```javascript
// ูู Request model
donorId: { ... }      // ููุฑุฑ ูู Donation
donorName: { ... }    // ููุฑุฑ ูู Donation
```

**ุงูุณุจุจ:** ููุฃุฏุงุก (ุชุฌูุจ JOIN ูู ูู ุงุณุชุนูุงู)

**ูู ูุฐุง ุฌูุฏุ** โ ูุนูุ ูููุดุงุฑูุน ุงูุตุบูุฑุฉ ูุฐุง ููุจูู

---

## ๐ฏ ุงูุชุตููู ุงูููุชุฑุญ ุงููุญุณูู

### ุฅุฐุง ุฃุฑุฏุช ุฏุนู ุงูุชุจุฑุนุงุช ุงููุงููุฉ:

```sql
donations
โโโ ... (ุงูุญููู ุงูููุฌูุฏุฉ)
โโโ donationType ENUM('item', 'money', 'service')
โโโ amount DECIMAL(10,2) [ููุชุจุฑุนุงุช ุงููุงููุฉ]
โโโ currency VARCHAR(3) [USD, SAR, etc.]

requests
โโโ ... (ุงูุญููู ุงูููุฌูุฏุฉ)
โโโ requestedAmount DECIMAL(10,2) [ุงููุจูุบ ุงููุทููุจ]
โโโ notes TEXT [ููุงุญุธุงุช ุฅุถุงููุฉ]
```

---

## ๐ ูุฎุทุท ุงูุนูุงูุงุช (ERD)

```
โโโโโโโโโโโโโโโ
โ    User     โ
โ  (ุงููุณุชุฎุฏู) โ
โโโโโโโโโโโโโโโค
โ id (PK)     โ
โ name        โ
โ email       โ
โ role        โ
โโโโโโโโโโโโโโโ
      โ
      โ 1:N (as donor)
      โ
โโโโโโโโโโโโโโโโโโโ
โ   Donation      โ
โ   (ุงูุชุจุฑุน)      โ
โโโโโโโโโโโโโโโโโโโค
โ id (PK)         โ
โ donorId (FK)    โโโโโโโโ
โ approvedBy (FK) โ      โ 1:N (as approver)
โ title           โ      โ
โ category        โ      โ
โ approvalStatus  โ      โ
โโโโโโโโโโโโโโโโโโโ      โ
      โ                  โ
      โ 1:N              โ
      โ                  โ
โโโโโโโโโโโโโโโโโโโ      โ
โ    Request      โ      โ
โ    (ุงูุทูุจ)      โ      โ
โโโโโโโโโโโโโโโโโโโค      โ
โ id (PK)         โ      โ
โ donationId (FK) โ      โ
โ receiverId (FK) โโโโโโโโ
โ donorId (FK)    โ
โ status          โ
โโโโโโโโโโโโโโโโโโโ
```

---

## โ ุงูุชูุตูุงุช

### ููุนุฑุถ ุงูุชูุฏููู:

1. **ุงุดุฑุญ ุจูุถูุญ:**
   - ุงูููุตุฉ ููุชุจุฑุนุงุช ุงูุนูููุฉ (ุณูุน/ุฎุฏูุงุช)
   - ููุณุช ููุชุจุฑุนุงุช ุงููุงููุฉ (ุฃู ุฃุถู ุงูุฏุนู)

2. **ุฃูุฏ ุนูู:**
   - ูุธุงู ุงูููุงููุฉ ุงูุซูุงุซู (ูุชุจุฑุน โ ูุฏูุฑ โ ูุณุชูุจู)
   - ุงูุนูุงูุงุช ูุงุถุญุฉ ูููุทููุฉ

3. **ุฅุฐุง ุณูุฆูุช ุนู `amount`:**
   - "ุงูููุตุฉ ูุตููุฉ ููุชุจุฑุนุงุช ุงูุนูููุฉ"
   - "ูููู ุฅุถุงูุฉ ุฏุนู ุงูุชุจุฑุนุงุช ุงููุงููุฉ ูุณุชูุจูุงู"

---

## ๐ง ูู ุชุญุชุงุฌ ุชุนุฏููุ

### ุฅุฐุง ุฃุฑุฏุช ุฅุถุงูุฉ ุฏุนู ุงูุชุจุฑุนุงุช ุงููุงููุฉ:

1. ุฃุถู ุญูู `amount` ุฅูู Donation
2. ุฃุถู ุญูู `donationType`
3. ุนุฏูู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ
4. ุนุฏูู ููุทู ุงูููุงููุฉ

### ุฅุฐุง ุฃุฑุฏุช ุงูุฅุจูุงุก ุนูู ุงูุชุตููู ุงูุญุงูู:

- โ ุงูุชุตููู ุฌูุฏ ููุชุจุฑุนุงุช ุงูุนูููุฉ
- โ ุงูุนูุงูุงุช ูุงุถุญุฉ
- โ ูุนูู ุจุดูู ุตุญูุญ

---

**ุงูุฎูุงุตุฉ:** ุงูุชุตููู ุงูุญุงูู ุฌูุฏ ููุชุจุฑุนุงุช ุงูุนูููุฉุ ููู ูุญุชุงุฌ ุชูุถูุญ ูู ุงูุชูุซูู.
